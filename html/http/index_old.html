<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="switchstyle.css">
<title>Control switch</title>
</head>
<body>

<h1>Control switch</h1>
<div class="onoffswitch">
    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked onclick='changeState(this);'>
    <label class="onoffswitch-label" for="myonoffswitch">
        <span class="onoffswitch-inner"></span>
        <span class="onoffswitch-switch"></span>
    </label>
</div>

<script>
setInterval(updateSwitch, 2000); //1000 MS == 1 s

function updateSwitch() {
var xhttp;
if (window.XMLHttpRequest) {
    xhttp = new XMLHttpRequest();
    } else {
    xhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
  xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
		if (this.responseText == "true")
			document.getElementById("myonoffswitch").checked = true;
		else if (this.responseText == "false")
			document.getElementById("myonoffswitch").checked = false;
	}
  };
  xhttp.open("GET", "updateRelay.lc", true);
  xhttp.send();
}

function changeState(checkbox) {
var xhttp;
if (window.XMLHttpRequest) {
    xhttp = new XMLHttpRequest();
    } else {
    // code for IE6, IE5
    xhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
    xhttp.onreadystatechange = function() {
      if (!(this.readyState == 4 && this.status == 200)) {
	}
  };
	xhttp.open("GET", "RelayToggle.lc", true);
	xhttp.send();
}
</script>

</body>
</html>



